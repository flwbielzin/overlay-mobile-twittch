<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Overlay Mobile - Carregando...</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles-mobile.css">
</head>
<body>
    <!-- Overlay para Celular/IRL -->
    <div class="mobile-overlay">
        <!-- InformaÃ§Ãµes do Canal (Compacto) -->
        <div class="channel-info-mobile">
            <div class="streamer-avatar-mobile">
                <img id="streamer-avatar-mobile" src="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png" alt="Avatar">
                <div class="live-indicator-mobile">ğŸ”´</div>
            </div>
            <div class="channel-details-mobile">
                <div class="streamer-name-mobile" id="streamer-name-mobile">Carregando...</div>
                <div class="stream-title-mobile" id="stream-title-mobile">Carregando informaÃ§Ãµes...</div>
            </div>
        </div>

        <!-- Contadores Compactos -->
        <div class="counters-mobile">
            <div class="counter-item-mobile">
                <span class="counter-icon">ğŸ‘¥</span>
                <span class="counter-value" id="viewers-count-mobile">0</span>
            </div>
            <div class="counter-item-mobile">
                <span class="counter-icon">â¤ï¸</span>
                <span class="counter-value" id="followers-count-mobile">0</span>
            </div>
            <div class="counter-item-mobile">
                <span class="counter-icon">ğŸ’¬</span>
                <span class="counter-value" id="chatters-count-mobile">0</span>
            </div>
        </div>

        <!-- Seguidores Recentes (Compacto) -->
        <div class="recent-followers-mobile">
            <div class="followers-header-mobile">ğŸ†• Novos Seguidores</div>
            <div class="followers-list-mobile" id="followers-list-mobile">
                <!-- Lista de seguidores recentes -->
            </div>
        </div>

        <!-- Tempo de Stream -->
        <div class="stream-time-mobile">
            <span class="time-icon">â°</span>
            <span id="stream-uptime-mobile">00:00:00</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="twitchApi.js"></script>
    <script src="overlay-mobile.js"></script>
    
    <!-- Inicializar Sistema -->
    <script>
        // VariÃ¡veis globais
        let twitchAPI;
        let mobileOverlay;
        
        // FunÃ§Ã£o para inicializar tudo na ordem correta
        async function inicializarSistema() {
            console.log('ğŸš€ Iniciando sistema overlay mobile...');
            
            try {
                // 1. Verificar configuraÃ§Ã£o
                if (typeof CONFIG === 'undefined') {
                    console.error('âŒ CONFIG nÃ£o encontrado!');
                    return;
                }
                console.log('âœ… ConfiguraÃ§Ã£o carregada:', CONFIG.CHANNEL_NAME);
                
                // 2. Inicializar API da Twitch
                if (typeof TwitchAPI === 'undefined') {
                    console.error('âŒ TwitchAPI nÃ£o encontrada!');
                    return;
                }
                
                twitchAPI = new TwitchAPI();
                console.log('âœ… API da Twitch criada');
                
                // 3. Testar conexÃ£o da API
                const connected = await twitchAPI.testConnection();
                if (connected) {
                    console.log('âœ… API da Twitch conectada com sucesso!');
                } else {
                    console.warn('âš ï¸ API da Twitch nÃ£o conectada, usando modo simulado');
                }
                
                // 4. Inicializar overlay mobile
                if (typeof MobileOverlay === 'undefined') {
                    console.error('âŒ MobileOverlay nÃ£o encontrado!');
                    return;
                }
                
                mobileOverlay = new MobileOverlay();
                await mobileOverlay.initialize();
                
                console.log('ğŸ‰ Sistema inicializado com sucesso!');
                
            } catch (error) {
                console.error('âŒ Erro na inicializaÃ§Ã£o:', error);
            }
        }
        
        // Inicializar quando a pÃ¡gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ“± Carregando overlay mobile...');
            
            // Aguardar um pouco para garantir que todos os scripts carregaram
            setTimeout(inicializarSistema, 500);
        });
        
        // Limpar ao sair
        window.addEventListener('beforeunload', () => {
            if (mobileOverlay) {
                mobileOverlay.stop();
            }
        });
    </script>
</body>
</html> 