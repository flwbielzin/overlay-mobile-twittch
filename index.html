<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Overlay Mobile - Carregando...</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles-mobile.css">
</head>
<body>
    <!-- Overlay para Celular/IRL -->
    <div class="mobile-overlay">
        <!-- Informa√ß√µes do Canal (Compacto) -->
        <div class="channel-info-mobile">
            <div class="streamer-avatar-mobile">
                <img id="streamer-avatar-mobile" src="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png" alt="Avatar">
                <div class="live-indicator-mobile">üî¥</div>
            </div>
            <div class="channel-details-mobile">
                <div class="streamer-name-mobile" id="streamer-name-mobile">Carregando...</div>
                <div class="stream-title-mobile" id="stream-title-mobile">Carregando informa√ß√µes...</div>
            </div>
        </div>

        <!-- Contadores Compactos -->
        <div class="counters-mobile">
            <div class="counter-item-mobile">
                <span class="counter-icon">üë•</span>
                <span class="counter-value" id="viewers-count-mobile">0</span>
            </div>
            <div class="counter-item-mobile">
                <span class="counter-icon">‚ù§Ô∏è</span>
                <span class="counter-value" id="followers-count-mobile">0</span>
            </div>
        </div>

        <!-- Chat Compacto (Lateral) -->
        <div class="chat-container-mobile">
            <div class="chat-header-mobile">
                <span>üí¨ Chat</span>
                <button id="toggle-chat-mobile" onclick="toggleMobileChat()">‚àí</button>
            </div>
            <div class="chat-messages-mobile" id="chat-messages-mobile">
                <!-- Mensagens do chat aparecer√£o aqui -->
            </div>
        </div>

        <!-- Alertas para Mobile -->
        <div class="alerts-container-mobile" id="alerts-container-mobile">
            <!-- Alertas aparecer√£o aqui -->
        </div>

        <!-- Seguidores Recentes (Compacto) -->
        <div class="recent-followers-mobile">
            <div class="followers-header-mobile">üÜï Novos Seguidores</div>
            <div class="followers-list-mobile" id="followers-list-mobile">
                <!-- Lista de seguidores recentes -->
            </div>
        </div>

        <!-- Informa√ß√µes de Localiza√ß√£o (Para IRL) -->
        <div class="location-info-mobile">
            <div class="location-icon">üìç</div>
            <div class="location-text" id="location-text-mobile">Obtendo localiza√ß√£o...</div>
        </div>

        <!-- Tempo de Stream -->
        <div class="stream-time-mobile">
            <span class="time-icon">‚è∞</span>
            <span id="stream-uptime-mobile">00:00:00</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="twitchApi.js"></script>
    <script src="overlay-mobile.js"></script>
    
    <!-- Inicializar Sistema -->
    <script>
        // Vari√°veis globais
        let twitchAPI;
        let mobileOverlay;
        
        // Fun√ß√£o para inicializar tudo na ordem correta
        async function inicializarSistema() {
            console.log('üöÄ Iniciando sistema overlay mobile...');
            
            try {
                // 1. Verificar configura√ß√£o
                if (typeof CONFIG === 'undefined') {
                    console.error('‚ùå CONFIG n√£o encontrado!');
                    return;
                }
                console.log('‚úÖ Configura√ß√£o carregada:', CONFIG.CHANNEL_NAME);
                
                // 2. Inicializar API da Twitch
                if (typeof TwitchAPI === 'undefined') {
                    console.error('‚ùå TwitchAPI n√£o encontrada!');
                    return;
                }
                
                twitchAPI = new TwitchAPI();
                console.log('‚úÖ API da Twitch criada');
                
                // 3. Testar conex√£o da API
                const connected = await twitchAPI.testConnection();
                if (connected) {
                    console.log('‚úÖ API da Twitch conectada com sucesso!');
                } else {
                    console.warn('‚ö†Ô∏è API da Twitch n√£o conectada, usando modo simulado');
                }
                
                // 4. Inicializar overlay mobile
                if (typeof MobileOverlay === 'undefined') {
                    console.error('‚ùå MobileOverlay n√£o encontrado!');
                    return;
                }
                
                mobileOverlay = new MobileOverlay();
                await mobileOverlay.initialize();
                
                console.log('üéâ Sistema inicializado com sucesso!');
                
            } catch (error) {
                console.error('‚ùå Erro na inicializa√ß√£o:', error);
            }
        }
        
        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üì± Carregando overlay mobile...');
            
            // Aguardar um pouco para garantir que todos os scripts carregaram
            setTimeout(inicializarSistema, 500);
        });
        
        // Limpar ao sair
        window.addEventListener('beforeunload', () => {
            if (mobileOverlay) {
                mobileOverlay.stop();
            }
        });
    </script>
</body>
</html> 