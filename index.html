<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Overlay Mobile - FlwBielzinn</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles-mobile.css">
</head>
<body>
    <!-- Overlay Mobile Minimalista -->
    <div class="mobile-overlay-minimal">
        
        <!-- √öltimo Seguidor (Fixo no topo) -->
        <div class="last-follower-display">
            <div class="last-follower-icon">üë§</div>
            <div class="last-follower-text">
                <div class="last-follower-label">√öltimo Seguidor:</div>
                <div class="last-follower-name" id="last-follower-name">Aguardando...</div>
            </div>
        </div>

        <!-- Tempo de Live (Fixo no canto) -->
        <div class="live-time-display">
            <div class="live-time-icon">‚è∞</div>
            <div class="live-time-text">
                <div class="live-time-label">Tempo de Live:</div>
                <div class="live-time-value" id="live-time-value">00:00:00</div>
            </div>
        </div>

        <!-- Notifica√ß√£o de Novo Seguidor (Flutuante) -->
        <div class="new-follower-notification" id="follower-notification">
            <div class="notification-content">
                <div class="notification-icon">‚ù§Ô∏è</div>
                <div class="notification-text">
                    <div class="notification-title">Novo Seguidor!</div>
                    <div class="notification-username" id="new-follower-name">Usuario123</div>
                </div>
                <div class="notification-celebration">üéâ</div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="twitchApi.js"></script>
    <script src="overlay-mobile.js"></script>
    
    <!-- Inicializar Sistema -->
    <script>
        // Vari√°veis globais
        let twitchAPI;
        let mobileOverlay;
        
        // Fun√ß√£o para inicializar tudo na ordem correta
        async function inicializarSistema() {
            console.log('üöÄ Iniciando sistema overlay mobile minimalista...');
            
            try {
                // 1. Verificar configura√ß√£o
                if (typeof CONFIG === 'undefined') {
                    console.error('‚ùå CONFIG n√£o encontrado!');
                    return;
                }
                console.log('‚úÖ Configura√ß√£o carregada:', CONFIG.CHANNEL_NAME);
                
                // 2. Inicializar API da Twitch
                if (typeof TwitchAPI === 'undefined') {
                    console.error('‚ùå TwitchAPI n√£o encontrada!');
                    return;
                }
                
                twitchAPI = new TwitchAPI();
                console.log('‚úÖ API da Twitch criada');
                
                // 3. Testar conex√£o da API
                const connected = await twitchAPI.testConnection();
                if (connected) {
                    console.log('‚úÖ API da Twitch conectada com sucesso!');
                } else {
                    console.warn('‚ö†Ô∏è API da Twitch n√£o conectada, usando modo simulado');
                }
                
                // 4. Inicializar overlay mobile
                if (typeof MobileOverlay === 'undefined') {
                    console.error('‚ùå MobileOverlay n√£o encontrado!');
                    return;
                }
                
                mobileOverlay = new MobileOverlay();
                await mobileOverlay.initialize();
                
                console.log('üéâ Sistema minimalista inicializado com sucesso!');
                
            } catch (error) {
                console.error('‚ùå Erro na inicializa√ß√£o:', error);
            }
        }
        
        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üì± Carregando overlay mobile minimalista...');
            
            // Aguardar um pouco para garantir que todos os scripts carregaram
            setTimeout(inicializarSistema, 500);
        });
        
        // Limpar ao sair
        window.addEventListener('beforeunload', () => {
            if (mobileOverlay) {
                mobileOverlay.stop();
            }
        });
    </script>
</body>
</html> 